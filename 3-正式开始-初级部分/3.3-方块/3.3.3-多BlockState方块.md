# 多BlockState方块

Minecraft有普通的木箱子，为什么就没有铁箱子、金箱子呢？这一节，笔者将以铁箱子、金箱子为例，带领读者创建多BlockState方块。

## 什么是BlockState

`BlockState`是Minecraft 1.8引入的系统，用以替代原先标记方块状态使用的`Metadata`。顾名思义，`BlockState`就是方块状态。如熔炉的不同的朝向、红石灯的亮灭等，都是多`BlockState`的具体体现。

## Block与BlockState的关系

`Block`与`BlockState`的关系，**就好比`Item`与`ItemStack`的关系**。Minecraft中世界的方块，**就是以`BlockState`存储的**。`BlockState`与`Block`相比，多了xyz的坐标信息，**还多了`state`信息**。也就是上文所述的熔炉、红石灯等。

## 开始创建

首先就是方块的类。具体的方法请参考**3.2.6章节**。

**`src/main/java/com/github/vvvbbbcz/modderguide/block/MetalChest.java（部分）`**：

```java
public class MetalChest extends Block {
	public MetalChest() {
		super(Properties.create(Material.IRON));
	}
}
```

然后，就是添加`state`的阶段。在代码中叫`Property`，先从最简单的朝向开始。

```java
public static final DirectionProperty FACING = HorizontalBlock.HORIZONTAL_FACING;
```

`DirectionProperty`指的是朝向，**如果该state是布尔值（红石灯），则是`BooleanProperty`**。如果有更复杂的需求，则需要**自行创建相应的Enum**（如下文的铁与金的材质）。

```java
public static final EnumProperty<EnumMaterial> MATERIAL = EnumProperty.create("material", EnumMaterial.class);

public static enum EnumMaterial implements IStringSerializable {
	IRON("iron"),
	GOLD("gold");

	private String name;

	EnumMaterial(String name) {
		this.name = name;
	}

	@Override
	public String toString() {
		return this.name;
	}

	@Nonnull
	@Override
	public String getName() {
		return this.name;
	}
}
```

我们已经创建了两个方块状态，但现在游戏并不认得我们的方块状态，我们需要覆写`fillStateContainer()`方法。

```java
@Override
protected void fillStateContainer(StateContainer.Builder<Block, BlockState> builder) {
	builder.add(<your_states>);
	super.fillStateContainer(builder);
}
```

## 模型与材质

由于时间关系，此部分9月20日晚上再更新。